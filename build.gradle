// Plugins
plugins {
    id 'io.spring.dependency-management' version '1.0.6.RELEASE'
    id 'com.jfrog.bintray' version '1.8.4'
	id 'de.lukaskoerfer.gradle.delombok' version '0.2'
}

// All-Projects
allprojects {
	// Repositories
	repositories {
		jcenter()
		maven { url "https://dl.bintray.com/philippheuer/maven" }
	}
}

// Subprojects
subprojects {
    apply plugin: 'java'
    apply plugin: 'eclipse'
    apply plugin: 'idea'
    apply plugin: 'maven-publish'
    apply plugin: 'io.spring.dependency-management'
	apply plugin: 'de.lukaskoerfer.gradle.delombok'

    // Source Compatiblity
    sourceCompatibility = 1.8

    // Dependency Management for Subprojects
    dependencyManagement {
        dependencies {
            // Logging
            dependency group: 'org.slf4j', name: 'slf4j-api', version: '1.7.25'
            dependency group: 'ch.qos.logback', name: 'logback-classic', version: '1.2.3'

            // Apache Commons
            dependency group: 'org.apache.commons', name: 'commons-lang3', version: '3.8.1'
            dependency group: 'commons-io', name: 'commons-io', version: '2.6'

            //
            dependency group: 'com.google.code.findbugs', name: 'jsr305', version: '3.0.2'

            // Event Dispatcher
            dependency group: 'com.github.philippheuer.events4j', name: 'events4j', version: '0.4.0'

			// Credential Manager
			dependency group: 'com.github.philippheuer.credentialmanager', name: 'credentialmanager', version: '0.0.5'

			// HTTP Client
            dependency group: 'com.squareup.okhttp3', name: 'okhttp', version: '3.11.0'
            dependency group: 'io.github.openfeign', name: 'feign-okhttp', version: '9.3.1'
            dependency group: 'io.github.openfeign', name: 'feign-jackson', version: '9.3.1'
            dependency group: 'io.github.openfeign', name: 'feign-slf4j', version: '9.3.1'
            dependency group: 'com.netflix.hystrix', name: 'hystrix-core', version: '1.5.12'

            // Jackson (JSON)
            dependency group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.9.7'

			// WebSocket
			dependency group: 'com.neovisionaries', name: 'nv-websocket-client', version: '2.6'

            // Testing
            dependency group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: '5.3.1'

            // Lombok
            dependency group: 'org.projectlombok', name: 'lombok', version: '1.18.2'
        }
    }

	// Common Dependencies
	plugins.withType(JavaPlugin) {
		dependencies {
			// Logging
			compile group: 'org.slf4j', name: 'slf4j-api'
			testCompile group: 'ch.qos.logback', name: 'logback-classic'

			// Event Dispatcher
			compile group: 'com.github.philippheuer.events4j', name: 'events4j'

			// Apache Commons
			compile group: 'org.apache.commons', name: 'commons-lang3'
			compile group: 'commons-io', name: 'commons-io'

			// Test
			testCompile group: 'org.junit.jupiter', name: 'junit-jupiter-api'

			// Getter & Setter
			compileOnly group: 'org.projectlombok', name: 'lombok'
			testCompile group: 'org.projectlombok', name: 'lombok'
			annotationProcessor group: 'org.projectlombok', name: 'lombok'
		}
	}
}
